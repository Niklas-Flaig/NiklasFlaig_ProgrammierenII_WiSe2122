<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8">
    <title>Chat</title>
    <link rel="stylesheet" href="./styles/style.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  </head>
  <body>
    <div id="vue">
      <!-- loginScreen -->
      <div id="logInScreen" v-if="currentMode === 'logIn'">
        <div v-on:click="submitNiklasFlaigLogin()"> <!-- this button is temporary -->
          <h3>Log in!</h3>
        </div>
        <input type="text" id="logIn_userName" v-model="userName" placeholder="Enter Username..."/>
        <input type="text" id="logIn_password" v-model="password" placeholder="Enter Password..."/>
        <button id="submitLogin_Button" v-on:click="submitLogin()">Enter</button>
      </div>
      
      <div id="chat" v-if="currentMode === 'chat'">
        <!-- chat/group selection -->
        <div id="chatSelectSurface" class="surface">
          <button :id="chat.chatID" class="chatTo" v-for="chat in clientChats" v-on:click="switchChat(chat.chatID)">
            <h4 class="chatName"> 
              {{ chat.getChatName() }}
            </h4>
            <div class="lastMessage" class="sendtBy_You">
              {{ chat.getLastMessageText() }}
            </div>
          </button>
        </div>


        <!-- the in Chat Surface with messages -->
        <div id="inChatSurface" class="surface">
          <div id="chatHistory">
            <!-- creation of the messages -->
            <div v-for="message in chatHistory" v-bind:class=message.getSenderClass()>
              <div class="sender">{{ message.getSenderName() }}</div>
              <div class="content">{{ message.getContent() }}</div>
              <div class="time">{{ message.getTimeToDisplay() }}</div>
            </div>
          </div>
          <div id="chatInput">
            <input type="text" id="textMessage_TextInput" v-model="newMessageText" placeholder="Enter message...">
            <button id="sendMessage_Button" v-on:click="sendMessage()">send</button>
          </div>
        </div>
      </div>

    </div>
    <script src=./javaScripts/classes.js></script>
    <script src="https://cdn.socket.io/4.3.0/socket.io.js"></script>
    <script src=./javaScripts/vue.js></script>
    <script src=./javaScripts/socket.js></script>
  </body>
</html>
