<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8">
    <title>Chat</title>
    <link rel="stylesheet" href="./styles/style.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  </head>
  <body>
    <div id="vue">
      <!-- loginScreen -->
      <div id="logInScreen" v-if="currentMode === 'logIn'">
        <div v-on:click="submitNiklasFlaigLogin()"> <!-- this button is temporary -->
          <h3>Log in!</h3>
        </div>
        <input type="text" v-model="userName" placeholder="Enter Username..."/>
        <input type="text" v-model="password" placeholder="Enter Password..."/>
        <button v-on:click="submitLogin()">Enter</button>
        <a v-on:click="changeMode('register')">register</a>
      </div>

      <!-- register screen -->
      <div id="registerScreen" v-if="currentMode === 'register'">
        <h3>Create a new account!</h3>
        <input type="text" v-model="userName" placeholder="Enter Username..."/>
        <input type="text" v-model="password" placeholder="Enter Password..."/>
        <input type="text" v-model="repeatPassword" placeholder="Repeat Password..."/>
        <button v-on:click="submitRegister()">Enter</button>
        <a v-on:click="changeMode('logIn')">Already have an account?</a>
      </div>
      
      <div id="chat" v-if="currentMode === 'chat'">
        <!-- chat/group selection -->
        <div id="chatSelectSurface" class="surface">
          <button :id="chat.chatID" class="chatTo" v-for="chat in clientChats" v-on:click="switchChat(chat.chatID)">
            <h4 class="chatName"> 
              {{ chat.getChatName() }}
            </h4>
            <div class="lastMessage" class="sendtBy_You">
              {{ chat.getLastMessageText() }}
            </div>
          </button>
          <!-- add a new chat -->
          <button v-on:click="changeMode('createChat')">add chat</button>
        </div>


        <!-- the in Chat Surface with messages -->
        <div id="inChatSurface" class="surface" v-if="currentMode !== 0">
          <div id="chatHistory">
            <!-- creation of the messages -->
            <div v-for="message in chatHistory" v-bind:class=message.getSenderClass()>
              <div class="sender">{{ message.getSenderName() }}</div>
              <div class="content">{{ message.getContent() }}</div>
              <div class="time">{{ message.getTimeToDisplay() }}</div>
            </div>
          </div>
          <div id="chatInput">
            <input type="text" id="textMessage_TextInput" v-model="newMessageText" v-on:keyup.enter="sendMessage" placeholder="Enter message...">
            <button id="sendMessage_Button" v-on:click="sendMessage()">send</button>
          </div>
        </div>

        <div id="inChatSurfacePlaceholder" class="surface" v-if="currentMode === 0">
            <h1>Enter a chat!!</h1>
        </div>

      </div>

      <!-- create a new PtoPChat -->
      <div class="surface" v-if="currentMode === 'createChat'">
        <h3>Create a new Chat!</h3>
        <input type="text" v-model="newChat.userName" v-on:keyup.enter="createNewChat('pToPChat')" placeholder="Enter UserName..."/>
        <button v-on:click="createNewChat('pToPChat')">create chat</button>
      </div>
      
    </div>
    <script src=./javaScripts/classes.js></script>
    <script src="https://cdn.socket.io/4.3.0/socket.io.js"></script>
    <script src=./javaScripts/vue.js></script>
    <script src=./javaScripts/socket.js></script>
  </body>
</html>
